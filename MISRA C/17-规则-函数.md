# 函数

函数是C语言实现模块化和代码重用的基本单元。函数的定义、声明和调用必须遵循严格的规则。

## 规则 17.1：标准库函数不应被重定义或隐藏

- 必须

不应声明或定义与标准库函数同名的函数或宏。这样做会隐藏或重定义标准库函数的行为，导致不可预测的后果和可移植性问题。

## 规则 17.2：函数不应被递归调用

- 必须

在嵌入式系统中，递归调用（一个函数直接或间接调用自身）通常是被禁止的。递归会消耗大量的栈空间，其消耗量在编译时难以确定，可能导致栈溢出。此外，递归也会使代码的执行时间分析变得复杂。

## 规则 17.3：函数参数不应被修改

- 建议

函数参数在进入函数时持有调用者传入的值。在函数体内修改参数的值，会使其失去原始传入值的意义，降低代码的可读性。应使用局部变量来代替。

## 规则 17.4：函数的所有参数都应在函数体中使用

- 建议

如果一个函数声明了某个参数，但在函数体中并未使用它，这可能表明存在逻辑错误：要么是参数多余了，要么是函数实现中遗漏了对该参数的处理。

## 规则 17.5：函数的返回类型应与调用它的表达式的类型兼容

- 必须

函数调用的返回值被用于表达式时，其类型必须与表达式期望的类型兼容。例如，一个返回 `void` 的函数，其调用结果不能被赋值给任何变量。

## 规则 17.6：函数的参数应与函数声明中的参数类型匹配

- 必须

调用函数时，传递的实际参数的类型必须与函数原型声明中的形式参数的类型严格匹配。类型不匹配会导致未定义行为。

## 规则 17.7：函数的返回值应被使用

- 必须

如果一个函数被设计为返回一个值（尤其是错误码或状态），那么调用者必须检查或使用这个返回值。忽略返回值可能导致程序无法正确处理错误情况。如果确实不需要返回值，应将其显式地转换为 `(void)` 来表明这是有意为之。

## 规则 17.8：函数的参数不应依赖于未指定的求值顺序

- 建议

如果一个函数调用的多个参数都带有副作用（例如 `my_func(i++, i)`)，C语言标准并未规定参数的求值顺序。依赖于特定求值顺序的代码是不可移植的。
