# 表达式

表达式的求值方式和类型转换是C语言中许多微妙错误的来源。

## 规则 12.1：表达式中子表达式的求值顺序是未指定的，除非有序列点

- 必须

不要编写依赖于子表达式求值顺序的代码。例如，在表达式 `x = i++ + i;` 中，`i++` 和 `i` 哪个先被求值是未指定的，这会导致在不同编译器下产生不同的结果。只有在序列点（如 `&&`, `||`, `? :`, `,` 运算符，或函数调用结束处）之后，求值顺序才有保证。

## 规则 12.2：移位运算符的右操作数应小于左操作数的位宽

- 必须

对一个 `n` 位的整数进行 `n` 位或更多的移位，其行为是未定义的。例如，对一个32位的 `unsigned int` 左移32位或更多位是错误的。此外，右操作数不能为负数。

## 规则 12.3：`sizeof` 运算符不应对带有副作用的表达式使用

- 建议

`sizeof` 运算符的操作数在大多数情况下是不会被求值的。如果其操作数是一个带有副作用的表达式（如 `sizeof(i++)`），这个副作用将不会发生，这与程序员的期望相悖，会引起混淆。

## 规则 12.4：逻辑运算符不应与非布尔类型的表达式混合使用

- 建议

`&&` 和 `||` 运算符的操作数应该是逻辑（布尔）表达式。将它们与算术表达式或其他类型的表达式混合在一起会降低代码的可读性，并可能掩盖逻辑错误。
