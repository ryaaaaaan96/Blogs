# switch 语句

`switch` 语句是处理多路分支的有效工具，但其独特的语法（尤其是 `case` 的“穿透”行为）也容易引发错误。

## 规则 16.1：`switch` 表达式不应是布尔类型

- 必须

`switch` 语句的控制表达式不应是一个有效布尔值。如果表达式只有 `true` 和 `false` 两种可能，使用 `if-else` 语句会更清晰、更直接。

## 规则 16.2：`switch` 语句的 `case` 标签应是唯一的

- 必须

在同一个 `switch` 语句中，所有的 `case` 常量表达式的值必须是唯一的。重复的 `case` 值是编译错误，但此规则旨在强调代码审查的重要性。

## 规则 16.3：`switch` 语句中的 `case` 子句不应“穿透”到后续 `case`

- 必须

每个非空的 `case` 子句都必须以一个中断语句（如 `break`, `return`, `goto`）结束。故意利用 `case` 的穿透（fall-through）特性来执行多个分支的代码，会使程序逻辑变得非常混乱和易错。如果确实需要穿透，必须有明确的注释来说明。

## 规则 16.4：每个 `switch` 语句都应有一个 `default` 子句

- 必须

所有的 `switch` 语句都必须包含一个 `default` 子句。这个 `default` 子句用于处理 `switch` 表达式取值为任何 `case` 标签都未覆盖到的情况。这对于保证程序的健壮性至关重要。

## 规则 16.5：`default` 子句应是 `switch` 语句的最后一个子句

- 建议

将 `default` 子句放在 `switch` 语句的最后（在所有 `case` 子句之后）是普遍接受的编码风格，这使得代码的结构更清晰、更易于阅读。

## 规则 16.6：`switch` 语句中的 `case` 标签数量不应过多

- 建议

一个 `switch` 语句如果包含大量的 `case` 标签，可能会变得难以管理和理解。如果分支非常多，可以考虑使用其他方式，如查找表（lookup table）来实现。

## 规则 16.7：`default` 子句不应为空

- 必须

`default` 子句必须包含代码，至少要有一个注释说明为什么不需要执行任何操作，或者包含一个断言来捕获预期之外的控制流。一个空的 `default` 子句可能意味着程序员忘记了处理某些情况。
