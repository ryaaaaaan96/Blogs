# 1. 入门
## 1.1 举例
从水龙头放水
![[企业微信截图_17103115145051.png]]
## 1.2 适用环境
二阶以内的线性系统（齐次性叠加性）
齐次性`y = f(x)` => `ky = f(kx)`
叠加性 `y1 = f(x1) ` 同时 `y2 = f(x2)` 可以推导出 `y1 + y2= f(x1) + f(x2)` 

**一阶系统**
![[Pasted image 20240313144009.png]]
**二阶系统**
![[Pasted image 20240313144103.png]]
## 1.3 PID不适用的系统
高阶系统 ——化简为二阶系统
非线性系统 —— 李雅普诺夫第一法在平衡点处线性化

## 1.4 宏观意义
PID解决95%的问题
简单, ⽆须精确建模
# 2 控制系统知识
## 2.1 控制系统知识
1. 一般开环控制系统
![[企业微信截图_17103124156504.png]]
不论输出效果怎么样都不管
2. 前馈控制系统
![[企业微信截图_17103128804226.png]]
提前测量出对象中的干扰，在输入端把干扰给补偿掉
3. 闭环控制系统
![[企业微信截图_1710312988171.png]]
对被控对象进行测量，偏差信号用于调整控制器
4. 双闭环控制系统
![[企业微信截图_17103131811124.png]]
就是常说的电机控制的双闭环控制，电流环和速度环
> [!内环选取]
> 1. 内外环频率分离：内环和外环的频率应尽量分离，以避免内环的动态响应对外环造成干扰。通常情况下，内环的带宽应远高于外环的带宽。这样可以确保内环对外环的影响较小，从而提高系统的稳定性和抗干扰能力。
>     
> 2. 稳定性要求：内环的选取应考虑系统的稳定性要求。内环应具有足够的带宽和相角裕度，以确保系统在内环控制下能够稳定工作，并满足外环的性能指标。一般来说，内环的带宽应远高于系统的最高频率要求。
>     
> 3. 内环动态响应：内环的选择应考虑系统的快速响应要求。内环带宽的选择将直接影响系统的响应速度和稳定性。较高的内环带宽可以实现更快的响应，但也可能引入更多的噪声和干扰。因此，需要在性能要求和稳定性之间进行权衡。
>     
> 4. 内环稳定性分析：在选择内环时，可以进行内环稳定性分析，例如使用根轨迹、Bode图等方法来评估内环的稳定性。通过分析内环的极点位置和传递函数特性，可以确定适当的内环带宽和参数。
>     
> 5. 实际系统特性：实际系统的特性和限制也需要考虑。例如，如果内环控制需要实时计算或特殊硬件支持，需要考虑系统的计算能力或硬件资源。
> 

5. 复合控制系统
多种控制综合起来
![[企业微信截图_17103140057903.png]]
PID能解决95%的问题，前馈反馈能解决剩下5%中的95%
## 2.2 离散控制信号
![[企业微信截图_171031450253.png]]
![[企业微信截图_1710314564960.png]]
这种离散方式导致信号出现了一个滞后
# 3 PID入门
## 3.1 公式
![[企业微信截图_17103148133503.png]]
## 3.2 形象解释
![[企业微信截图_17103157243367.png]]
纯理想状态下只用p是永远无法精确到达目标位置的
![[企业微信截图_17103162344574.png]]
在有外力作用的情况下会停在一个地方不动了，这个时候就需要积分项，
![[企业微信截图_1710316311369.png]]
积分项会带来超调，微分项的作用是降低超调
![[企业微信截图_17103167314797.png]]
## 3.2 PID参数的整定
模型整定法（建模）
工程经验整定法
## 3.3 变种
- 积分限幅
假设无人机在起飞的时候有人按住了无人机，误差在一直积累，累计到很大以后然后突然放掉，就很难上升到顶点，
- 积分分离
在给定发生突变的时候，（例如 100到900）积分也会在一段时间内积累特别多，比例项也在迅速上升，超调会非常大，采用偏差大于一定值就（500）就不进行积分项累计
- 微分先行
当期望突变的时候，偏差会很大，微分项也会快速变化，直接用输出进行控制降低了突变带来的影响，适合给定值频繁变化的情况
![[企业微信截图_17103183074551.png]]
- 抗饱和积分
积分饱和现象是指如果系统存在一个方向的偏差，PID控制器的输出由于积分作用的不断累加而加大，从而导致执行机构达到极限位置，若控制器输出继续增大，执行器开度不可能再增大，此时计算机输出控制量超出了正常运行范围而进入饱和区。一旦系统出现反向偏差，控制器输出逐渐从饱和区退出。进入饱和区越深则退出饱和区时间越长。在这段时间里，执行机构仍然停留在极限位置而不随偏差反向而立即做出相应的改变，这时系统就像失控一样，造成控制性能恶化，这种现象称为积分饱和现象或积分失控现象。防止积分饱和的方法之一就是抗积分饱和法，该方法的思路是在计算时，首先判断上一时刻的控制器输出是否已经超出了执行器的极限范围： 如果大于上限，则只累加负偏差; 如果小于下限，则只累加正偏差。从而避免控制量长时间停留在饱和区。（积分分离也可以做到）
- 梯形积分
积分项积分的时候使用此次的值和上次值的均值
- 变速积分
积分项的系数和偏差值成比例，计算速度慢一些
- 不完全微分
微分项在稳定的时候由于采样误差会产生高频干扰，在控制器的输出后面加一个一阶惯性环节
- 带死区控制
误差小于一个值的时候不进行控制
- 步进式PID
对输入进行步进设置，在较大的阶跃信号产生时，不进行立刻响应，而是一步步加到目标值，相比积分分离响应慢一些，但稳定读强一些；
- 各种滤波
采样各种低通高通卡尔曼滤波器

# 4 带前馈补偿的PID控制

## 4.1 基本思想
在高精度伺服控制中，前馈控制可用来提高系统的跟踪性能。经典控制理论中的前馈控制设计是基于复合控制思想的，当闭环系统为连续系统时，使前馈环节与闭环系统的传递函数之积为1，从而实现输出完全复现输入。
![[Pasted image 20240313170350.png]]
从上图中，我们可以发现前馈环节的传递函数是被控对象的倒数。那么就是在使用前馈控制前我们需要对被控对象的模型有了解，才能有针对性的设计出合适的前馈控制器。也就说，每个系统的前馈控制器都是不一样的，每个前馈控制器都是专用的。

要实施前馈控制，首先我们必须得到被控系统的近似模型，这个模型越接近真实的系统，控制的效果就越明显。
## 4.2 原理介绍
### 4.2.1 针对给定进行
传统PI调节
![[Pasted image 20240617104226.png]]
带有前馈的PI调节（前馈转换成一个比例模型）
![[Pasted image 20240617104324.png]]

分析传递函数可以得出，前馈控制器只能影响系统的零点不会修改原系统的极点，（前馈可能会引入新的极点）
设前馈的误差传递函数为Gf，目标为使传递函数的零点为0；
![[Pasted image 20240617104828.png]]
前馈环节和被控对象在大多数情况下的关系是互为倒数（在Gb（s）不为1的时候需要将反馈函数带入计算）：
![[Pasted image 20240617105301.png]]

### 4.2.2 针对误差进行
前馈不止可以针对给定信号，也可以针对干扰信号进行前馈，计算出干扰信号的前馈传递函数，如下图
![[Pasted image 20240617110226.png]]
一般情况下的目标是让误差传递函数为0，但对于一些高阶系统动态全补偿难以实现，考虑针对稳态做全补偿；例如：针对阶跃信号，让误差传递函数的分子最低阶次为1即可，对于斜坡信号，让分子的最低阶次为2即可，
### 4.2.3 实际应用
在实际应用中不一定能完全准确进行参数辨识，在总体趋势准确的情况下，是能够在一定程度上加快收敛速度的
## 4.3 matlab仿真
待完善，看了别人的仿真结果是能在一定程度上提高动态的跟踪性能
![[Pasted image 20240617112949.png]]





